<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">

    <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
    <link rel="shortcut icon" href="favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />

    <link rel="stylesheet" href="styles.css">
    <title>Svenska Reformationsbibeln - En Bibel i Tiden</title>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Add Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
<!-- Add this CSS to your existing style.css file -->
<style>
/* Spotlight Search Styles - Add to your style.css */
.overlay {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0, 0, 0, 0.75);
    backdrop-filter: blur(8px);
    z-index: 10000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.overlay.active {
    opacity: 1;
    visibility: visible;
}

.search-box {
    position: absolute;
    top: 12%;
    left: 50%;
    transform: translateX(-50%) translateY(-30px);
    width: 90%;
    max-width: 720px;
    background: var(--card-bg);
    border-radius: 20px;
    box-shadow: 0 25px 80px rgba(0, 0, 0, 0.4);
    overflow: hidden;
    transition: transform 0.3s ease;
    border: 1px solid var(--border-color);
}

.overlay.active .search-box {
    transform: translateX(-50%) translateY(0);
}

.search-header {
    padding: 1.5rem;
    border-bottom: 1px solid var(--border-color);
    background: var(--primary-bg);
    display: flex;
    align-items: center;
    gap: 1rem;
}

.search-icon {
    color: var(--accent-color);
    font-size: 1.4rem;
}

.search-input {
    flex: 1;
    border: none;
    outline: none;
    background: transparent;
    font-size: 1.3rem;
    font-family: inherit;
    color: var(--primary-text);
    padding: 0.5rem 0;
    font-weight: 500;
}

.search-input::placeholder {
    color: rgba(74, 52, 38, 0.6);
}

.close-hint {
    color: rgba(74, 52, 38, 0.5);
    font-size: 0.9rem;
    font-family: monospace;
    background: rgba(74, 52, 38, 0.1);
    padding: 0.3rem 0.6rem;
    border-radius: 4px;
}

.search-results {
    max-height: 65vh;
    overflow-y: auto;
    background: var(--card-bg);
}

.result-item {
    padding: 1.2rem 1.5rem;
    border-bottom: 1px solid rgba(212, 197, 169, 0.3);
    cursor: pointer;
    transition: all 0.2s ease;
}

.result-item:hover,
.result-item.selected {
    background: rgba(139, 105, 20, 0.08);
    border-left: 4px solid var(--accent-color);
    padding-left: calc(1.5rem - 4px);
}

.verse-reference {
    font-weight: 600;
    color: var(--accent-color);
    font-size: 1.1rem;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    margin-bottom: 0.6rem;
}

.verse-text {
    font-size: 1.05rem;
    line-height: 1.6;
    color: var(--primary-text);
}

.verse-text mark {
    background: rgba(139, 105, 20, 0.3);
    padding: 0.1em 0.2em;
    border-radius: 3px;
    font-weight: 600;
}

.empty-state {
    padding: 4rem 2rem;
    text-align: center;
    color: rgba(74, 52, 38, 0.6);
}

.empty-state i {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: var(--accent-color);
}

.notification {
    position: fixed;
    top: 20px;
    right: 20px;
    background: var(--gradient-gold);
    color: #2b1d00;
    padding: 1rem 1.5rem;
    border-radius: 10px;
    box-shadow: 0 6px 25px rgba(0, 0, 0, 0.3);
    z-index: 10001;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 0.6rem;
    transform: translateX(400px);
    transition: transform 0.3s ease;
}

.notification.show {
    transform: translateX(0);
}

@media (max-width: 768px) {
    .search-box { width: 95%; top: 8%; }
    .search-header { padding: 1.2rem; }
    .search-input { font-size: 1.1rem; }
    .notification { right: 10px; left: 10px; transform: translateY(-100px); }
    .notification.show { transform: translateY(0); }
}
</style>

<!-- Add this HTML anywhere on your page -->
<div class="overlay" id="searchOverlay">
    <div class="search-box">
        <div class="search-header">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" id="searchInput" 
                   placeholder="Sök i Svenska Reformationsbibeln..." 
                   autocomplete="off" spellcheck="false">
            <span class="close-hint">ESC</span>
        </div>
        <div class="search-results" id="searchResults">
            <div class="empty-state">
                <i class="fas fa-bible"></i>
                <p>Börja skriva för att söka...</p>
            </div>
        </div>
    </div>
</div>

<!-- Add this JavaScript at the end of your page -->
<script>
class SRB16Search {
    constructor() {
        this.overlay = document.getElementById('searchOverlay');
        this.input = document.getElementById('searchInput');
        this.results = document.getElementById('searchResults');
        this.selectedIndex = -1;
        this.currentResults = [];
        this.bibleData = null;
        this.searchIndex = [];
        
        this.init();
    }

    async init() {
        await this.loadBibleData();
        this.buildSearchIndex();
        this.setupEventListeners();
    }

    async loadBibleData() {
        const cacheKey = 'srb16_bible_data';
        const cacheVersionKey = 'srb16_bible_version';
        const currentVersion = '1.0'; // Increment this when you update the JSON file
        
        try {
            // Check if we have cached data and it's the right version
            const cachedVersion = localStorage.getItem(cacheVersionKey);
            const cachedData = localStorage.getItem(cacheKey);
            
            if (cachedData && cachedVersion === currentVersion) {
                console.log('Loading Bible data from cache...');
                this.bibleData = JSON.parse(cachedData);
                return;
            }
            
            // Fetch fresh data
            console.log('Fetching Bible data from server...');
            const response = await fetch('srb16_new_testament.json');
            this.bibleData = await response.json();
            
            // Cache the data
            try {
                localStorage.setItem(cacheKey, JSON.stringify(this.bibleData));
                localStorage.setItem(cacheVersionKey, currentVersion);
                console.log('Bible data cached successfully');
            } catch (cacheError) {
                console.warn('Could not cache Bible data (storage full?):', cacheError);
            }
            
        } catch (error) {
            console.error('Failed to load Bible data:', error);
            // Try to fall back to cached data even if version is old
            const cachedData = localStorage.getItem(cacheKey);
            if (cachedData) {
                console.log('Using old cached data as fallback...');
                this.bibleData = JSON.parse(cachedData);
            }
        }
    }

    buildSearchIndex() {
        if (!this.bibleData?.books) return;
        
        this.searchIndex = [];
        Object.entries(this.bibleData.books).forEach(([bookCode, book]) => {
            Object.entries(book.chapters).forEach(([chapterNum, verses]) => {
                Object.entries(verses).forEach(([verseNum, text]) => {
                    this.searchIndex.push({
                        reference: `${book.name} ${chapterNum}:${verseNum}`,
                        book: book.name,
                        bookCode: bookCode,
                        chapter: parseInt(chapterNum),
                        verse: parseInt(verseNum),
                        text: text,
                        keywords: this.extractKeywords(text),
                        searchText: `${book.name} ${text}`.toLowerCase()
                    });
                });
            });
        });
    }

    extractKeywords(text) {
        return text.toLowerCase()
            .replace(/[^\w\såäö]/g, ' ')
            .split(/\s+/)
            .filter(word => word.length >= 3)
            .filter(word => !['och', 'att', 'det', 'som', 'för', 'med', 'till', 'han', 'hon', 'den', 'dem', 'var', 'har', 'inte', 'från', 'när', 'alla'].includes(word));
    }

    setupEventListeners() {
        document.addEventListener('keydown', (e) => {
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                this.open();
            }
            if (e.key === 'Escape' && this.isOpen()) {
                this.close();
            }
            if (this.isOpen()) {
                this.handleNavigation(e);
            }
        });

        this.input.addEventListener('input', () => {
            setTimeout(() => this.search(this.input.value), 200);
        });

        this.overlay.addEventListener('click', (e) => {
            if (e.target === this.overlay) this.close();
        });
    }

    open() {
        this.overlay.classList.add('active');
        this.input.value = '';
        document.body.style.overflow = 'hidden';
        
        // Focus after the CSS transition completes (300ms)
        setTimeout(() => {
            this.input.focus();
        }, 100);
    }

    close() {
        this.overlay.classList.remove('active');
        document.body.style.overflow = '';
    }

    isOpen() {
        return this.overlay.classList.contains('active');
    }

    search(query) {
        if (!query.trim()) {
            this.results.innerHTML = '<div class="empty-state"><i class="fas fa-bible"></i><p>Börja skriva för att söka...</p></div>';
            return;
        }

        const results = this.performSearch(query);
        this.displayResults(results);
    }

    performSearch(query) {
        const searchTerms = query.toLowerCase().split(/\s+/);
        const results = [];

        this.searchIndex.forEach(verse => {
            let score = 0;

            // Check for Bible reference match
            const refScore = this.matchReference(query.toLowerCase(), verse);
            if (refScore > 0) score += refScore;

            // Check for keyword matches
            searchTerms.forEach(term => {
                if (term.length < 3) return;
                verse.keywords.forEach(keyword => {
                    if (keyword.includes(term) || term.includes(keyword)) {
                        score += keyword === term ? 10 : 5;
                    }
                });
            });

            // Check for text content matches
            searchTerms.forEach(term => {
                if (term.length >= 3) {
                    const matches = (verse.text.toLowerCase().match(new RegExp(term, 'g')) || []).length;
                    score += matches * 3;
                }
            });

            if (score > 0) {
                results.push({
                    ...verse,
                    score,
                    highlighted: this.highlightMatches(verse.text, searchTerms)
                });
            }
        });

        return results.sort((a, b) => b.score - a.score).slice(0, 8);
    }

    matchReference(query, verse) {
        const cleanQuery = query.replace(/\s+/g, '');
        const shortcuts = {
            'matt': 'matteus', 'joh': 'johannes', 'rom': 'romarbrevet',
            '1kor': 'förstakorintierbrevet', '2kor': 'andrakorintierbrevet'
        };

        const bookName = verse.book.toLowerCase().replace(/\s+/g, '');
        const fullRef = `${bookName}${verse.chapter}:${verse.verse}`;
        
        if (cleanQuery === fullRef) return 100;

        for (const [shortcut, fullName] of Object.entries(shortcuts)) {
            if (bookName.includes(fullName)) {
                const shortRef = `${shortcut}${verse.chapter}:${verse.verse}`;
                if (cleanQuery === shortRef) return 95;
            }
        }
        return 0;
    }

    highlightMatches(text, searchTerms) {
        let highlighted = text;
        searchTerms.forEach(term => {
            if (term.length >= 3) {
                highlighted = highlighted.replace(new RegExp(`(${term})`, 'gi'), '<mark>$1</mark>');
            }
        });
        return highlighted;
    }

    displayResults(results) {
        this.currentResults = results;
        this.selectedIndex = -1;

        if (results.length === 0) {
            this.results.innerHTML = '<div class="empty-state"><i class="fas fa-search"></i><p>Inga resultat hittades</p></div>';
            return;
        }

        const html = results.map((result, index) => `
            <div class="result-item" data-index="${index}">
                <div class="verse-reference">
                    <i class="fas fa-bookmark"></i>
                    ${result.reference}
                </div>
                <div class="verse-text">${result.highlighted}</div>
            </div>
        `).join('');

        this.results.innerHTML = html;

        this.results.querySelectorAll('.result-item').forEach((item, index) => {
            item.addEventListener('click', () => this.selectResult(index));
        });
    }

    handleNavigation(e) {
        const resultItems = this.results.querySelectorAll('.result-item');
        
        if (e.key === 'ArrowDown') {
            e.preventDefault();
            this.selectedIndex = Math.min(this.selectedIndex + 1, resultItems.length - 1);
            this.updateSelection();
        } else if (e.key === 'ArrowUp') {
            e.preventDefault();
            this.selectedIndex = Math.max(this.selectedIndex - 1, -1);
            this.updateSelection();
        } else if (e.key === 'Enter') {
            e.preventDefault();
            if (this.selectedIndex >= 0) {
                this.selectResult(this.selectedIndex);
            }
        }
    }

    updateSelection() {
        const resultItems = this.results.querySelectorAll('.result-item');
        resultItems.forEach((item, index) => {
            item.classList.toggle('selected', index === this.selectedIndex);
        });
        if (this.selectedIndex >= 0) {
            resultItems[this.selectedIndex].scrollIntoView({ block: 'nearest' });
        }
    }

    selectResult(index) {
        const result = this.currentResults[index];
        if (result) {
            const textToCopy = `${result.reference}\n"${result.text}"`;
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(textToCopy);
            } else {
                const textArea = document.createElement('textarea');
                textArea.value = textToCopy;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
            }
            
            this.showNotification('Bibelversen kopierad!');
            this.close();
        }
    }

    showNotification(message) {
        const notification = document.createElement('div');
        notification.className = 'notification';
        notification.innerHTML = `<i class="fas fa-check"></i> ${message}`;
        document.body.appendChild(notification);
        
        setTimeout(() => notification.classList.add('show'), 100);
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => document.body.removeChild(notification), 300);
        }, 3000);
    }
}

// Initialize when page loads
document.addEventListener('DOMContentLoaded', () => {
    new SRB16Search();
});
</script>



</head>

<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <a href="#hem">
                    <div class="logo-icon"></div>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="#hem">Hem</a></li>
                <li><a href="QnA.html">Frågor & Svar</a></li>
                <li><a href="#resurser">Resurser</a></li>
                <li><a href="#om-oss">Om Oss</a></li>
                <li><a href="#kontakt">Kontakt</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="hem" class="hero fade-in">
        <div class="hero-content">
            <h1><span class="title-part1">Svenska Reformations</span><span class="title-break"></span><span
                    class="title-part2">bibeln</span></h1>
            <p class="hero-subtitle">En Bibel i Tiden</p>
            <div class="hero-description">
                Reformationsbibeln är en modern svensk översättning av Karl XII:s Bibel från 1703 baserad på Textus
                Receptus.
                Nuvarande prognos är att kunna skicka hela <b> Bibelns text till tryckning i början av 2026</b>. <b>
                    Förbön och ekonomiskt stöd är mycket angeläget</b>. Ny PDF-fil av <b>GT är publicerad 8 september
                    2025</b>.
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Quick Access Section -->
        <section class="quick-access scroll-fade">
            <h2 class="section-title">Snabbåtkomst</h2>
            <div class="quick-buttons">
                <a href="https://bibelonline.se/biblereader.php" target="_blank" class="quick-btn">
                    <i class="fas fa-book-open"></i> Läs Online
                </a>
                <a href="https://bibel.se/wordpress/index.php/2022/01/22/bestalla-reformationsbibeln/" target="_blank"
                    class="quick-btn">
                    <i class="fas fa-shopping-cart"></i> Beställ Bibel
                </a>
                <a href="https://bibel.se/wordpress/index.php/2022/01/18/oversatta-bibelbocker/" target="_blank"
                    class="quick-btn">
                    <i class="fas fa-file-pdf"></i> PDF-Versioner
                </a>
            </div>
        </section>


        <!-- Navigation Grid -->
        <section id="resurser" class="section scroll-fade">
            <h2 class="section-title">Utforska Våra Resurser</h2>
            <div class="nav-grid">

                <!-- Bible Reading Section -->
                <div id="bibeln" class="nav-card">
                    <div class="card-icon"><i class="fas fa-bible"></i></div>
                    <h3 class="card-title">Bibeltexten</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Digital Bibelläsare</span>
                            <button class="expand-btn" data-target="bibelonline-sub">+</button>
                        </div>
                        <div class="sub-links" id="bibelonline-sub">
                            <a href="https://bibelonline.se/biblereader.php" target="_blank">Digital Bibelläsare</a>
                            <a href="https://bibelonline.se/biblereader.php?book=40" target="_blank">Nya Testamentet</a>
                            <a href="https://bibelonline.se/biblereader.php?book=1" target="_blank">Gamla
                                Testamentet</a>
                        </div>

                        <div class="main-link">
                            <span>YouVersion</span>
                            <button class="expand-btn" data-target="youversion-sub">+</button>
                        </div>
                        <div class="sub-links" id="youversion-sub">
                            <a href="https://www.bible.com/bible/3413/MAT.1.SRB16" target="_blank">YouVersion (SRB16)
                            </a>
                            <a href="https://www.bible.com/bible/3413/MAT.1.SRB16?parallel=154"
                                target="_blank">YouVersion Parallel läsning</a>
                        </div>

                        <div class="main-link">
                            <span>PDF-nedladdningar</span>
                            <button class="expand-btn" data-target="pdf-sub">+</button>
                        </div>
                        <div class="sub-links" id="pdf-sub">
                            <a href="http://www.bibel.se/objfiles/PDF_books/SRBgrundtextski_-2024961626.pdf">
                                target="_blank">PDF-nedladdningar</a>
                            <a href="https://drive.google.com/drive/folders/1N-suLiCB4gOavhUg04P0xGzSDlCSntgo"
                                target="_blank">PDF-nedladdningar</a>
                            <a href="http://www.bibel.se/objfiles/1/SRBNTmedUNfotno_1604169176.pdf" target="_blank">NT
                                med fotnoter</a>
                            <a href="http://www.bibel.se/objfiles/1/SRBNTmedUNnoter_-774953843.pdf" target="_blank">NT
                                utan noter</a>
                            <a href="http://www.bibel.se/objfiles/1/SRBGTSartryckav_1200036187.pdf" target="_blank">GT
                                särtryck</a>
                        </div>
                    </div>
                </div>

                <!-- Media and Resources -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-video"></i></div>
                    <h3 class="card-title">Videoserie & YouTube</h3>
                    <div class="card-links">

                        <div class="sub-links" id="media-hub-sub">
                            <a href="https://bibel.se/wordpress/index.php/media/" target="_blank">Alla videor</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2023/01/SRB_Kanal10_221125_800kbps.mp4"
                                target="_blank">SRB Kanal 10 intervju</a>
                        </div>

                        <div class="main-link">
                            <span>Serie: En felaktig grundtext (5 delar)</span>
                            <button class="expand-btn" data-target="grundtext-serie-sub">+</button>
                        </div>
                        <div class="sub-links" id="grundtext-serie-sub">
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%201%20av%205-wjJ1fK6101g.mp4"
                                target="_blank">Del 1 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%202%20av%205-J9UiqtUW7bQ.mp4"
                                target="_blank">Del 2 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%203%20av%205-Cnjy3vO48ck.mp4"
                                target="_blank">Del 3 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%204%20av%205-bOuNPYwl5rQ.mp4"
                                target="_blank">Del 4 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%205%20av%205-W_Iw9DSrEdE.mp4"
                                target="_blank">Del 5 av 5</a>
                        </div>

                        <div class="main-link">
                            <span>Reformationsbibeln-serien</span>
                            <button class="expand-btn" data-target="reformations-serie-sub">+</button>
                        </div>
                        <div class="sub-links" id="reformations-serie-sub">
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Reformationsbibeln%20del%201%202%20-PAvs5sATZBA.mp4"
                                target="_blank">Reformationsbibeln del 1-2</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Reformationsbibeln%20del%203%20-eoRo6hsQooM.mp4"
                                target="_blank">Reformationsbibeln del 3</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bakgrunden%20till%20revideringen%20av%20Karl%20XIIs%20Bibel-84807534.mp4"
                                target="_blank">Bakgrund till revideringen</a>
                        </div>

                        <div class="main-link">
                            <span>YouTube-kanal</span>
                            <button class="expand-btn" data-target="youtube-sub">+</button>
                        </div>
                        <div class="sub-links" id="youtube-sub">
                            <a href="https://www.youtube.com/@reformationsbibeln9676/videos"
                                target="_blank">Ljudbibel</a>
                        </div>

                    </div>
                </div>

                <!-- Bible Translations Section -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-exchange-alt"></i></div>
                    <h3 class="card-title">Bibelöversättningar</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Karl XII:s Bibel 1703</span>
                            <button class="expand-btn" data-target="karl-sub">+</button>
                        </div>
                        <div class="sub-links" id="karl-sub">
                            <a href="https://bibel.se/wordpress/index.php/andra-bibeloversattningar/"
                                target="_blank">Lista över andra översättningar</a>
                            <a href="https://www.bibel.se/objfiles/1/KXIIBibel1703he_-1499304058.pdf"
                                target="_blank">Karl XII:s Bibel 1703</a>
                            <a href="https://bibel.se/wordpress/index.php/2022/01/22/staves-revidering-1923-nt/"
                                target="_blank">Staves revidering 1923 NT</a>
                        </div>

                        <div class="main-link">
                            <span>Åkesons Översättning</span>
                            <button class="expand-btn" data-target="akeson-sub">+</button>
                        </div>
                        <div class="sub-links" id="akeson-sub">
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/fragor-om-bibeloversattningar/akesons-oversattning/bk-1861-nt_1059"
                                target="_blank">Åkesons Översättning</a>
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/fragor-om-bibeloversattningar/akesons-oversattning/bk-1861-nt_1059"
                                target="_blank">Om översättaren</a>
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/fragor-om-bibeloversattningar/akesons-oversattning/staves-revidering-1923-nt_1061"
                                target="_blank">Staves revidering</a>
                        </div>

                        <div class="main-link">
                            <span>Översättningshistoria</span>
                            <button class="expand-btn" data-target="historia-sub">+</button>
                        </div>
                        <div class="sub-links" id="historia-sub">
                            <a href="https://sv.wikipedia.org/wiki/Reformationsbibeln"
                                target="_blank">Översättningshistoria</a>
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/bk-1861-nt_1059"
                                target="_blank">Bibelkommissionen 1861</a>
                        </div>
                    </div>
                </div>

                <!-- Bible Study Tools -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-search"></i></div>
                    <h3 class="card-title">Studieverktyg</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Illustrerat Bibellexikon</span>
                            <button class="expand-btn" data-target="lexikon-sub">+</button>
                        </div>
                        <div class="sub-links" id="lexikon-sub">
                            <a href="https://www.bibel.se/bibellexikon" target="_blank">Illustrerat Bibellexikon</a>
                            <a href="http://www.bibel.se/bibellexikon/uppslagsdel-a-o_802" target="_blank">Uppslagsdel
                                A-Ö</a>
                            <a href="https://www.bibel.se/bibellexikon/ovrig-uppslagsdel_803" target="_blank">Övrig
                                uppslagsdel</a>
                            <a href="http://www.bibel.se/bibellexikon/bilder-illustrerat-bibellexikon_987"
                                target="_blank">Bilder från lexikon</a>
                        </div>

                        <div class="main-link">
                            <span>Online Bibelsökning</span>
                            <button class="expand-btn" data-target="sokning-sub">+</button>
                        </div>
                        <div class="sub-links" id="sokning-sub">
                            <a href="https://bibelonline.se/biblereader.php" target="_blank">Online Bibelsökning</a>
                        </div>

                        <div class="main-link">
                            <span>Referens material – Google Drive </span>
                            <button class="expand-btn" data-target="material-sub">+</button>
                        </div>
                        <div class="sub-links" id="material-sub">
                            <a href="https://drive.google.com/drive/folders/1N-suLiCB4gOavhUg04P0xGzSDlCSntgo"
                                target="_blank">Referensmaterial</a>
                        </div>
                    </div>
                </div>

                <!-- Questions and Answers -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-question-circle"></i></div>
                    <h3 class="card-title">Frågor och Svar</h3>
                    <div class="card-links">

                        <div class="main-link">
                            <span>Frågor & svar</span>
                            <button class="expand-btn" data-target="qna-sub">+</button>
                        </div>
                        <div class="sub-links" id="qna-sub">
                            <a href="QnA.html" target="_blank">Frågor & Svar</a>
                        </div>

                        <div class="main-link">
                            <span>SRB:s Bibelsyn</span>
                            <button class="expand-btn" data-target="bibelsyn-sub">+</button>
                        </div>
                        <div class="sub-links" id="bibelsyn-sub">
                            <a href="http://www.bibel.se/om-oss/fragor-och-svar/den-helige-ande-med-stor-bokstav/reformationbibeln-nya-testamentet_787"
                                target="_blank">SRB:s Bibelsyn</a>
                        </div>

                        <div class="main-link">
                            <span>Grundtext i GT</span>
                            <button class="expand-btn" data-target="grundtext-sub">+</button>
                        </div>
                        <div class="sub-links" id="grundtext-sub">
                            <a href="https://www.bibel.se/om-oss/fragor-och-svar/vilken-grundtext-anvander-srb-i-gt"
                                target="_blank">Grundtext i GT</a>
                        </div>

                        <div class="main-link">
                            <span>Textus Receptus vs Majoritet</span>
                            <button class="expand-btn" data-target="textus-sub">+</button>
                        </div>
                        <div class="sub-links" id="textus-sub">
                            <a href="http://www.bibel.se/om-oss/fragor-och-svar/skillnader-mellan-textus-receptus-och-majoritetstexten"
                                target="_blank">Textus Receptus vs Majoritet</a>
                        </div>
                    </div>
                </div>

                <!-- Articles and Teaching -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-file-alt"></i></div>
                    <h3 class="card-title">Artiklar och Undervisning</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Artiklar</span>
                            <button class="expand-btn" data-target="artiklar-main-sub">+</button>
                        </div>
                        <div class="sub-links" id="artiklar-main-sub">
                            <a href="https://bibel.se/wordpress/index.php/artiklar/" target="_blank">Artiklar</a>
                        </div>

                        <div class="main-link">
                            <span>Debatt</span>
                            <button class="expand-btn" data-target="debatt-main-sub">+</button>
                        </div>
                        <div class="sub-links" id="debatt-main-sub">
                            <a href="https://bibel.se/wordpress/index.php/2021/12/04/debatt/" target="_blank">Debatt</a>
                        </div>

                        <div class="main-link">
                            <span>Vad har hänt med Bibeln?</span>
                            <button class="expand-btn" data-target="bibeln-sub">+</button>
                        </div>
                        <div class="sub-links" id="bibeln-sub">
                            <a href="http://www.bibel.se/artiklar/vad-har-hant-med-bibeln_1193" target="_blank">Vad har
                                hänt med Bibeln?</a>
                        </div>

                        <div class="main-link">
                            <span>Klassiska Debattartiklar</span>
                            <button class="expand-btn" data-target="klassisk-debatt-sub">+</button>
                        </div>
                        <div class="sub-links" id="klassisk-debatt-sub">
                            <a href="http://www.bibel.se/artiklar/debatt" target="_blank">Klassiska Debattartiklar</a>
                        </div>

                        <div class="main-link">
                            <span>Uppslagsartiklar</span>
                            <button class="expand-btn" data-target="uppslagsartiklar-sub">+</button>
                        </div>
                        <div class="sub-links" id="uppslagsartiklar-sub">
                            <a href="https://www.bibel.se/bibellexikon/ovrig-uppslagsdel_803"
                                target="_blank">Uppslagsartiklar</a>
                        </div>
                    </div>
                </div>
                <!-- About and Contact 
                <div id="om-oss" class="nav-card">
                    <div class="card-icon"><i class="fas fa-info-circle"></i></div>
                    <h3 class="card-title">Om Oss och Kontakt</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Vår Historia</span>
                            <button class="expand-btn" data-target="historia-sub2">+</button>
                        </div>
                        <div class="sub-links" id="historia-sub2">
                            <a href="http://www.bibel.se/om-oss/historik/reformationsbibeln-gamla-testamentet_790"
                                target="_blank">Vår Historia</a>
                        </div>

                        <div class="main-link">
                            <span>Kontaktinformation</span>
                            <button class="expand-btn" data-target="kontakt-sub">+</button>
                        </div>
                        <div class="sub-links" id="kontakt-sub">
                            <a href="https://www.bibel.se/meddelande.php" target="_blank">Kontaktinformation</a>
                        </div>

                        <div class="main-link">
                            <span>Nyheter</span>
                            <button class="expand-btn" data-target="nyheter-sub2">+</button>
                        </div>
                        <div class="sub-links" id="nyheter-sub2">
                            <a href="http://www.bibel.se/om-oss/nyheter" target="_blank">Nyheter</a>
                            <a href="http://www.bibel.se/om-oss/nyheter/reformormationsbibelns-grundtext-har-stod-fran-gamla-handskrifter_1201"
                                target="_blank">Grundtext och handskrifter</a>
                        </div> -->
                    </div>
                </div>
            </div>
        </section>
        <!-- SheepAndFlag logo-->
        <img src="img/dragen_ut_får_svensk_flagg_01.png" class="flag-image" alt="Swedish Flag">
        </div>
    </main>

    <!-- Footer -->
    <footer id="kontakt" class="footer">
        <div class="footer-content">
            <h3>Svenska Reformationsbibeln</h3>
            <p>© 2025 Svenska Reformationsbibelsällskapet</p>
            <p>En moderniserad version av Karl XII:s Bibel från 1703, baserad på Textus Receptus</p>
            <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(244, 240, 224, 0.3);">
            </div>
        </div>
    </footer>

    <script>
        // Mobile menu toggle functionality
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
            });

            // Close menu when clicking on a link
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                }
            });
        }

        // Enhanced Sub-link expansion functionality with smooth animations
        document.addEventListener('click', (e) => {
            const mainLink = e.target.closest('.main-link');
            if (mainLink) {
                e.preventDefault();
                e.stopPropagation();

                const button = mainLink.querySelector('.expand-btn');
                if (button) {
                    const targetId = button.getAttribute('data-target');
                    const subLinks = document.getElementById(targetId);

                    if (subLinks) {
                        const isExpanded = subLinks.classList.contains('expanded');

                        // Close other expanded sections for better mobile UX
                        document.querySelectorAll('.sub-links.expanded').forEach(section => {
                            if (section !== subLinks) {
                                section.classList.remove('expanded');
                                const otherButton = document.querySelector(
                                    `[data-target="${section.id}"]`);
                                if (otherButton) otherButton.textContent = '+';
                                // Smooth close animation
                                section.style.maxHeight = '0px';
                            }
                        });

                        if (isExpanded) {
                            subLinks.classList.remove('expanded');
                            button.textContent = '+';
                            subLinks.style.maxHeight = '0px';
                        } else {
                            subLinks.classList.add('expanded');
                            button.textContent = '−';

                            // Calculate actual content height for smooth animation
                            const scrollHeight = subLinks.scrollHeight;
                            subLinks.style.maxHeight = scrollHeight + 'px';

                            // Smooth scroll to expanded section on mobile
                            if (window.innerWidth <= 768) {
                                setTimeout(() => {
                                    mainLink.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'nearest'
                                    });
                                }, 100);
                            }
                        }
                    }
                }
            }
        });

        // Smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const headerHeight = document.querySelector('.header').offsetHeight;
                    const targetPosition = target.offsetTop - headerHeight - 20;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.scroll-fade').forEach(el => {
            observer.observe(el);
        });

        // Viewport height fix for mobile browsers
        function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        setViewportHeight();

        // Performance optimization: Debounced resize handler
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                setViewportHeight();
            }, 250);
        });

        // Add loading animation to cards with staggered timing
        setTimeout(() => {
            document.querySelectorAll('.nav-card').forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('fade-in');
                }, index * 100);
            });
        }, 300);

        // Prevent zoom on double-tap for iOS Safari
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>
</body>
</html>
