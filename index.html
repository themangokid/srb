<!DOCTYPE html>
<html lang="sv">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=3.0, user-scalable=yes">

    <!-- Icons-->
    <link rel="icon" type="image/png" href="favicon/favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="favicon/favicon.svg" />
    <link rel="shortcut icon" href="favicon/favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="favicon/apple-touch-icon.png" />

    <!-- Fonts and styles-->
    <link rel="stylesheet" href="styles.css">
    <title>Svenska Reformationsbibeln - En bibel i tiden</title>
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <!-- Add Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- QR-code -->
    <script src="swish-qr-code-expand.js"></script>
    
</head>

<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <a href="#hem">
                    <div class="logo-icon"></div>
                </a>
            </div>
            <ul class="nav-menu">
                <li><a href="QnA.html">Frågor & svar</a></li>
                <li><a href="#resurser">Resurser</a></li>
                <li><a href="https://bibel.se" target="_blank">Bibel.se</a></li>
                <li><a href="#kontakt">Kontakt</a></li>
            </ul>
            <div class="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </nav>
    </header>

    <section id="hem" class="hero fade-in">
        <div class="hero-content">
            <h1><span class="title-part1">Svenska Reformations</span><span class="title-break"></span><span
                    class="title-part2">bibeln</span></h1>
            <p class="hero-subtitle">En bibel i tiden</p>
            <div class="hero-container-flex">
                <div class="hero-item">
                    <div class="hero-description">
                        Reformationsbibeln är en modern svensk översättning av Karl XII:s Bibel från 1703 baserad på
                        Textus
                        Receptus.
                        Nuvarande prognos för tryck är i början av 2026. <b>
                            Förbön och ekonomiskt stöd är mycket angeläget</b>.
                        <div style="padding-top:25px;"></div>
                        <a href="https://bibel.se/wordpress/wp-content/uploads/2023/01/SRB_Kanal10_221125_800kbps.mp4"
                            target="_blank">
                            <img src="img/kanal_10.webp">
                        </a>
                       <i><p>Ordförande för sällskapet Bo Hagstedt gästar Kanal 10.</p></i>
                    </div>
                </div>
                <!-- Updated HTML section for the hero area -->
                <div class="hero-item">
                    <div class="donation-section">
                        <!-- Donation button -->
                        <h2>Köp en helbibel idag!</h2>
                        <a href="checkout.html">  
                            <img src="img/swish.png" style="display: block; margin-left: 0;" width="40%" height="40%" alt="Swish betalning">
                        </a> 
                        <a href="checkout.html"  class="donation-button">
                                <h3 class="donation-title" style="text-decoration: none;">Beställ Bibel  <i class="fas fa-donate"></i></h3>
                            </a>

                        <!-- Bible purchase section 
        <div class="bible-purchase">
            <div class="bible-input-group">
                <div class="input-row">
                    <button onclick="buyBibles()" class="donation-button">
                        <h2 class="fas fa-shopping-cart"></h2> Köp
                    </button>
                </div>
            </div>
        </div> -->
                    </div>
                </div>

            </div>
        </div>
    </section>


    <!-- Main Content -->
    <main class="main-content">
        <!-- Quick Access Section -->
        <section class="quick-access scroll-fade">
            <h2 class="section-title">Snabbåtkomst</h2>
            <div class="quick-buttons">
                <a href="https://bibelonline.se/biblereader.php" target="_blank" class="quick-btn">
                    <i class="fas fa-book-open"></i> Läs Online
                </a>
                <!-- <a href="https://bibel.se/wordpress/index.php/2022/01/22/bestalla-reformationsbibeln/" target="_blank"
                    class="quick-btn">
                    <i class="fas fa-shopping-cart"></i> Beställ Bibel
                </a> -->
                <a href="https://bibel.se/wordpress/index.php/2022/01/18/oversatta-bibelbocker/" target="_blank"
                    class="quick-btn">
                    <i class="fas fa-file-pdf"></i> PDF-Versioner
                </a>
                <!-- Search Button - DISABLED -->
                <!-- 
                <button class="quick-btn search-btn" id="searchButton">
                    <i class="fas fa-search"></i> Sök <kbd>⌘</kbd> + <kbd>K</kbd>
                </button>
                -->
            </div>
        </section>

        <!-- Navigation Grid -->
        <section id="resurser" class="section scroll-fade">
            <h2 class="section-title">Våra resurser</h2>
            <div class="nav-grid">

                <!-- Bible Reading Section -->
                <div id="bibeln" class="nav-card">
                    <div class="card-icon"><i class="fas fa-bible"></i></div>
                    <h3 class="card-title">Bibeltexten</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>PDF-nedladdningar</span>
                            <button class="expand-btn" data-target="pdf-sub">+</button>
                        </div>
                        <div class="sub-links" id="pdf-sub">
                            <a href="http://www.bibel.se/objfiles/PDF_books/SRBgrundtextski_-2024961626.pdf"
                                target="_blank"> <b>Grundtextskillnader NT</b></a>
                            <a href="https://bibel.se/wordpress/index.php/2022/01/18/oversatta-bibelbocker/"
                                target="_blank">PDF-versioner</a>
                            <a href="http://www.bibel.se/objfiles/1/SRBNTmedUNfotno_1604169176.pdf" target="_blank">NT
                                med fotnoter</a>
                            <a href="http://www.bibel.se/objfiles/1/SRBNTmedUNnoter_-774953843.pdf" target="_blank">NT
                                utan noter</a>
                            <a href="http://www.bibel.se/objfiles/1/SRBGTSartryckav_1200036187.pdf" target="_blank">GT
                                särtryck</a>
                        </div>
                        <div class="main-link">
                            <span>Digital bibelläsare</span>
                            <button class="expand-btn" data-target="bibelonline-sub">+</button>
                        </div>
                        <div class="sub-links" id="bibelonline-sub">
                            <a href="https://bibelonline.se/biblereader.php" target="_blank">Digital bibelläsare</a>
                            <a href="https://bibelonline.se/biblereader.php?book=40" target="_blank">Nya Testamentet</a>
                            <a href="https://bibelonline.se/biblereader.php?book=1" target="_blank">Gamla
                                Testamentet</a>
                        </div>

                        <div class="main-link">
                            <span>You version</span>
                            <button class="expand-btn" data-target="youversion-sub">+</button>
                        </div>
                        <div class="sub-links" id="youversion-sub">
                            <a href="https://www.bible.com/bible/3413/MAT.1.SRB16" target="_blank">You version (SRB16)
                            </a>
                            <a href="https://www.bible.com/bible/3413/MAT.1.SRB16?parallel=154"
                                target="_blank">YouVersion Parallel läsning</a>
                        </div>

                    </div>
                </div>

                <!-- Media and Resources -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-video"></i></div>
                    <h3 class="card-title">Videoserie och youtube-kanal</h3>
                    <div class="card-links">

                        <div class="sub-links" id="media-hub-sub">
                            <a href="https://bibel.se/wordpress/index.php/media/" target="_blank">Alla videor</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2023/01/SRB_Kanal10_221125_800kbps.mp4"
                                target="_blank">SRB Kanal 10 intervju</a>
                        </div>

                        <div class="main-link">
                            <span>Serie: En felaktig grundtext (5 delar)</span>
                            <button class="expand-btn" data-target="grundtext-serie-sub">+</button>
                        </div>
                        <div class="sub-links" id="grundtext-serie-sub">
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%201%20av%205-wjJ1fK6101g.mp4"
                                target="_blank">Del 1 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%202%20av%205-J9UiqtUW7bQ.mp4"
                                target="_blank">Del 2 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%203%20av%205-Cnjy3vO48ck.mp4"
                                target="_blank">Del 3 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%204%20av%205-bOuNPYwl5rQ.mp4"
                                target="_blank">Del 4 av 5</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bibeln%20-%20En%20felaktig%20grundtext%20-%20del%205%20av%205-W_Iw9DSrEdE.mp4"
                                target="_blank">Del 5 av 5</a>
                        </div>

                        <div class="main-link">
                            <span>Reformationsbibeln-serien</span>
                            <button class="expand-btn" data-target="reformations-serie-sub">+</button>
                        </div>
                        <div class="sub-links" id="reformations-serie-sub">
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Reformationsbibeln%20del%201%202%20-PAvs5sATZBA.mp4"
                                target="_blank">Reformationsbibeln del 1-2</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Reformationsbibeln%20del%203%20-eoRo6hsQooM.mp4"
                                target="_blank">Reformationsbibeln del 3</a>
                            <a href="https://bibel.se/wordpress/wp-content/uploads/2022/03/Bakgrunden%20till%20revideringen%20av%20Karl%20XIIs%20Bibel-84807534.mp4"
                                target="_blank">Bakgrund till revideringen</a>
                        </div>

                        <div class="main-link">
                            <span>YouTube-kanal</span>
                            <button class="expand-btn" data-target="youtube-sub">+</button>
                        </div>
                        <div class="sub-links" id="youtube-sub">
                            <a href="https://www.youtube.com/@reformationsbibeln9676/videos"
                                target="_blank">Ljudbibel</a>
                        </div>

                        <div class="sub-links" id="youtube-sub-2">
                            <a href="https://www.youtube.com/watch?v=tkIZ8z9HKNk" target="_blank">Ljudbibel av Kristofer
                                Aspén</a>
                        </div>

                    </div>
                </div>

                <!-- Bible Translations Section -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-exchange-alt"></i></div>
                    <h3 class="card-title">Bibelöversättningar</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Karl XII:s Bibel 1703</span>
                            <button class="expand-btn" data-target="karl-sub">+</button>
                        </div>
                        <div class="sub-links" id="karl-sub">
                            <a href="https://bibel.se/wordpress/index.php/andra-bibeloversattningar/"
                                target="_blank">Lista över andra översättningar</a>
                            <a href="https://www.bibel.se/objfiles/1/KXIIBibel1703he_-1499304058.pdf"
                                target="_blank">Karl XII:s Bibel 1703</a>
                            <a href="https://bibel.se/wordpress/index.php/2022/01/22/staves-revidering-1923-nt/"
                                target="_blank">Staves revidering 1923 NT</a>
                        </div>

                        <div class="main-link">
                            <span>Åkesons översättning</span>
                            <button class="expand-btn" data-target="akeson-sub">+</button>
                        </div>
                        <div class="sub-links" id="akeson-sub">
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/fragor-om-bibeloversattningar/akesons-oversattning/bk-1861-nt_1059"
                                target="_blank">Åkesons översättning</a>
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/fragor-om-bibeloversattningar/akesons-oversattning/bk-1861-nt_1059"
                                target="_blank">Om översättaren</a>
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/fragor-om-bibeloversattningar/akesons-oversattning/staves-revidering-1923-nt_1061"
                                target="_blank">Staves revidering</a>
                        </div>

                        <div class="main-link">
                            <span>Översättningshistoria</span>
                            <button class="expand-btn" data-target="historia-sub">+</button>
                        </div>
                        <div class="sub-links" id="historia-sub">
                            <a href="https://sv.wikipedia.org/wiki/Reformationsbibeln"
                                target="_blank">Översättningshistoria</a>
                            <a href="http://www.bibel.se/bibeln/andra-bibeloversattningar/bk-1861-nt_1059"
                                target="_blank">Bibelkommissionen 1861</a>
                        </div>
                    </div>
                </div>

                <!-- Bible Study Tools -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-search"></i></div>
                    <h3 class="card-title">Studieverktyg</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Illustrerat bibellexikon</span>
                            <button class="expand-btn" data-target="lexikon-sub">+</button>
                        </div>
                        <div class="sub-links" id="lexikon-sub">
                            <a href="https://www.bibel.se/bibellexikon" target="_blank">Illustrerat Bibellexikon</a>
                            <a href="http://www.bibel.se/bibellexikon/uppslagsdel-a-o_802" target="_blank">Uppslagsdel
                                A-Ö</a>
                            <a href="https://www.bibel.se/bibellexikon/ovrig-uppslagsdel_803" target="_blank">Övrig
                                uppslagsdel</a>
                            <a href="http://www.bibel.se/bibellexikon/bilder-illustrerat-bibellexikon_987"
                                target="_blank">Bilder från lexikon</a>
                        </div>

                        <div class="main-link">
                            <span>Bibelstudieprogram online</span>
                            <button class="expand-btn" data-target="sokning-sub">+</button>
                        </div>
                        <div class="sub-links" id="sokning-sub">
                            <a href="https://bibelonline.se/studyb.php" target="_blank">Studera bibeln</a>
                            <a href="https://bibelonline.se/textfind.php" target="_blank">Sök i bibeln</a>
                            <a href="https://bibelonline.se/showref.php" target="_blank">Visa valda verser</a>
                            <a href="https://bibelonline.se/showtema.php" target="_blank">Visa tema</a>
                            <a href="https://bibelonline.se/showstrong.php" target="_blank">Sök strongs nummer</a>
                            <a href="https://bibelonline.se/bibeladvanced.php" target="_blank">Extra funktioner</a>
                            <a href="https://bibelonline.se/settings.php" target="_blank">Inställningar</a>
                            <a href="https://bibelonline.se/showinfo.php" target="_blank">Aktuell information</a>
                        </div>

                        <div class="main-link">
                            <span>Referens material – Google drive </span>
                            <button class="expand-btn" data-target="material-sub">+</button>
                        </div>
                        <div class="sub-links" id="material-sub">
                            <a href="https://drive.google.com/drive/folders/1N-suLiCB4gOavhUg04P0xGzSDlCSntgo"
                                target="_blank">Referensmaterial</a>
                        </div>
                    </div>
                </div>

                <!-- Questions and Answers -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-question-circle"></i></div>
                    <h3 class="card-title">Frågor och svar</h3>
                    <div class="card-links">

                        <div class="main-link">
                            <span>Frågor & svar</span>
                            <button class="expand-btn" data-target="qna-sub">+</button>
                        </div>
                        <div class="sub-links" id="qna-sub">
                            <a href="QnA.html" target="_blank">Frågor & svar</a>
                        </div>

                        <div class="main-link">
                            <span>SRB:s bibelsyn</span>
                            <button class="expand-btn" data-target="bibelsyn-sub">+</button>
                        </div>
                        <div class="sub-links" id="bibelsyn-sub">
                            <a href="http://www.bibel.se/om-oss/fragor-och-svar/den-helige-ande-med-stor-bokstav/reformationbibeln-nya-testamentet_787"
                                target="_blank">SRB:s bibelsyn</a>
                        </div>

                        <div class="main-link">
                            <span>Grundtext i GT</span>
                            <button class="expand-btn" data-target="grundtext-sub">+</button>
                        </div>
                        <div class="sub-links" id="grundtext-sub">
                            <a href="https://www.bibel.se/om-oss/fragor-och-svar/vilken-grundtext-anvander-srb-i-gt"
                                target="_blank">Grundtext i GT</a>
                        </div>

                        <div class="main-link">
                            <span>Textus Receptus vs Majoritet</span>
                            <button class="expand-btn" data-target="textus-sub">+</button>
                        </div>
                        <div class="sub-links" id="textus-sub">
                            <a href="http://www.bibel.se/om-oss/fragor-och-svar/skillnader-mellan-textus-receptus-och-majoritetstexten"
                                target="_blank">Textus Receptus vs Majoritet</a>
                        </div>
                    </div>
                </div>

                <!-- Articles and Teaching -->
                <div class="nav-card">
                    <div class="card-icon"><i class="fas fa-file-alt"></i></div>
                    <h3 class="card-title">Artiklar och undervisning</h3>
                    <div class="card-links">
                        <div class="main-link">
                            <span>Artiklar</span>
                            <button class="expand-btn" data-target="artiklar-main-sub">+</button>
                        </div>
                        <div class="sub-links" id="artiklar-main-sub">
                            <a href="https://bibel.se/wordpress/index.php/artiklar/" target="_blank">Artiklar</a>
                        </div>

                        <div class="main-link">
                            <span>Debatt</span>
                            <button class="expand-btn" data-target="debatt-main-sub">+</button>
                        </div>
                        <div class="sub-links" id="debatt-main-sub">
                            <a href="https://bibel.se/wordpress/index.php/2021/12/04/debatt/" target="_blank">Debatt</a>
                        </div>

                        <div class="main-link">
                            <span>Vad har hänt med Bibeln?</span>
                            <button class="expand-btn" data-target="bibeln-sub">+</button>
                        </div>
                        <div class="sub-links" id="bibeln-sub">
                            <a href="http://www.bibel.se/artiklar/vad-har-hant-med-bibeln_1193" target="_blank">Vad har
                                hänt med Bibeln?</a>
                        </div>

                        <div class="main-link">
                            <span>Klassiska Debattartiklar</span>
                            <button class="expand-btn" data-target="klassisk-debatt-sub">+</button>
                        </div>
                        <div class="sub-links" id="klassisk-debatt-sub">
                            <a href="http://www.bibel.se/artiklar/debatt" target="_blank">Klassiska Debattartiklar</a>
                        </div>

                        <div class="main-link">
                            <span>Uppslagsartiklar</span>
                            <button class="expand-btn" data-target="uppslagsartiklar-sub">+</button>
                        </div>
                        <div class="sub-links" id="uppslagsartiklar-sub">
                            <a href="https://www.bibel.se/bibellexikon/ovrig-uppslagsdel_803"
                                target="_blank">Uppslagsartiklar</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- SheepAndFlag logo-->
            <div style="margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid rgba(244, 240, 224, 0.3);">
                <img src="img/dragen_ut_får_svensk_flagg_01.png" class="flag-image" alt="Swedish Flag">
        </div>
    </main>

    <!-- Footer -->
    <footer id="kontakt" class="footer">
        <div class="footer-content">
            <h3>© 2025 Svenska Reformationsbibelsällskapet</h3>
            <p>En modern version av Karl XII:s Bibel från 1703, baserad på Textus Receptus</p>
            <p>Bankgiro: 5808-7446 | Swish: 1233882669 | E-post post@bibel.se
            </p>
            </div>
        </div>
    </footer>

    <!-- Main site functionality scripts -->
    <script>
        // Mobile menu toggle functionality
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');

        if (hamburger && navMenu) {
            hamburger.addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                navMenu.classList.toggle('active');
                hamburger.classList.toggle('active');
            });

            // Close menu when clicking on a link
            document.querySelectorAll('.nav-menu a').forEach(link => {
                link.addEventListener('click', () => {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                });
            });

            // Close menu when clicking outside
            document.addEventListener('click', (e) => {
                if (!hamburger.contains(e.target) && !navMenu.contains(e.target)) {
                    navMenu.classList.remove('active');
                    hamburger.classList.remove('active');
                }
            });
        }

        // Enhanced Sub-link expansion functionality with smooth animations
        document.addEventListener('click', (e) => {
            const mainLink = e.target.closest('.main-link');
            if (mainLink) {
                e.preventDefault();
                e.stopPropagation();

                const button = mainLink.querySelector('.expand-btn');
                if (button) {
                    const targetId = button.getAttribute('data-target');
                    const subLinks = document.getElementById(targetId);

                    if (subLinks) {
                        const isExpanded = subLinks.classList.contains('expanded');

                        // Close other expanded sections for better mobile UX
                        document.querySelectorAll('.sub-links.expanded').forEach(section => {
                            if (section !== subLinks) {
                                section.classList.remove('expanded');
                                const otherButton = document.querySelector(
                                    `[data-target="${section.id}"]`);
                                if (otherButton) otherButton.textContent = '+';
                                // Smooth close animation
                                section.style.maxHeight = '0px';
                            }
                        });

                        if (isExpanded) {
                            subLinks.classList.remove('expanded');
                            button.textContent = '+';
                            subLinks.style.maxHeight = '0px';
                        } else {
                            subLinks.classList.add('expanded');
                            button.textContent = '−';

                            // Calculate actual content height for smooth animation
                            const scrollHeight = subLinks.scrollHeight;
                            subLinks.style.maxHeight = scrollHeight + 'px';

                            // Smooth scroll to expanded section on mobile
                            if (window.innerWidth <= 768) {
                                setTimeout(() => {
                                    mainLink.scrollIntoView({
                                        behavior: 'smooth',
                                        block: 'nearest'
                                    });
                                }, 100);
                            }
                        }
                    }
                }
            }
        });

        // Smooth scrolling for internal links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    const headerHeight = document.querySelector('.header').offsetHeight;
                    const targetPosition = target.offsetTop - headerHeight - 20;

                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Intersection Observer for scroll animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.scroll-fade').forEach(el => {
            observer.observe(el);
        });

        // Viewport height fix for mobile browsers
        function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
        }

        setViewportHeight();

        // Performance optimization: Debounced resize handler
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                setViewportHeight();
            }, 250);
        });

        // Add loading animation to cards with staggered timing
        setTimeout(() => {
            document.querySelectorAll('.nav-card').forEach((card, index) => {
                setTimeout(() => {
                    card.classList.add('fade-in');
                }, index * 100);
            });
        }, 300);

        // Prevent zoom on double-tap for iOS Safari
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function (event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>

    <script>
        // DONATION FUNCTIONS
        function openDonationSwish() {
            // Prompt user for donation amount
            const amount = prompt("Ange donationsbelopp (kr):");

            // Validate input
            if (amount === null) {
                // User cancelled
                return;
            }

            const parsedAmount = parseInt(amount);
            if (isNaN(parsedAmount) || parsedAmount <= 0) {
                alert("Vänligen ange ett giltigt belopp.");
                return;
            }

            // Generate transaction ID for donation
            const transactionId = generateDonationId();
            const message = `Donation - ID: ${transactionId}`;

            console.log(`Donation: ${parsedAmount}kr - ID: ${transactionId}`);

            // Use Swish opening logic
            openSwishWithAmount("1233882669", parsedAmount, message);
            showDonationNotification(`Öppnar Swish för donation på ${parsedAmount}kr`);
        }

        function generateDonationId() {
            const timestamp = Date.now().toString(36);
            const randomPart = Math.random().toString(36).substr(2, 5);
            return `SRD-${timestamp}-${randomPart}`.toUpperCase();
        }

        function showDonationNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'donation-notification';
            notification.innerHTML = `
        <i class="fas fa-heart"></i>
        <span>${message}</span>
    `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // BIBLE PURCHASE FUNCTIONS (unchanged)
        function updateTotal() {
            const quantity = parseInt(document.getElementById('bibleQuantity').value) || 1;
            const total = quantity * 200;
            document.getElementById('bibleTotal').textContent = `= ${total} kr`;
        }

        function buyBibles() {
            const quantity = parseInt(document.getElementById('bibleQuantity').value) || 1;
            const total = quantity * 200;
            const transactionId = generateTransactionId();
            const description = `Köp ${quantity} Bibel${quantity > 1 ? 'ar' : ''}`;
            const fullMessage = `${description} - ID: ${transactionId}`;

            console.log(`Bible Purchase: ${quantity} x 200kr = ${total}kr - ID: ${transactionId}`);

            // Use Swish opening logic
            openSwishWithAmount("1233882669", total, fullMessage);
            showBibleNotification(`Öppnar Swish för köp av ${quantity} Bibel${quantity > 1 ? 'ar' : ''} (${total}kr)`);
        }

        function generateTransactionId() {
            const timestamp = Date.now().toString(36);
            const randomPart = Math.random().toString(36).substr(2, 5);
            return `SRB-${timestamp}-${randomPart}`.toUpperCase();
        }

        function showBibleNotification(message) {
            const notification = document.createElement('div');
            notification.className = 'bible-notification';
            notification.innerHTML = `
        <i class="fas fa-check"></i>
        <span>${message}</span>
    `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.classList.add('show');
            }, 100);

            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }

        // SHARED SWISH FUNCTION
        function openSwishWithAmount(swishNumber, amount, message) {
            const swishData = {
                "version": 1,
                "payee": {
                    "value": swishNumber,
                    "editable": false
                },
                "amount": {
                    "value": amount,
                    "editable": false
                },
                "message": {
                    "value": message,
                    "editable": false
                }
            };

            const jsonUrl = `swish://payment?data=${encodeURIComponent(JSON.stringify(swishData))}`;

            try {
                window.location.href = jsonUrl;
                return;
            } catch (error) {
                console.log('JSON format failed:', error);
            }

            // Fallback methods
            const fallbackUrls = [
                `swish://payment?phone=${swishNumber}&amount=${amount}&message=${encodeURIComponent(message)}`,
                `swish://paymentrequest?phone=${swishNumber}&amount=${amount}&message=${encodeURIComponent(message)}`,
                `swish://payment?phone=${swishNumber}&amount=${amount}`,
                `swish://payment?phone=${swishNumber}`
            ];

            for (let url of fallbackUrls) {
                try {
                    window.location.href = url;
                    return;
                } catch (error) {
                    console.log('Fallback failed:', error);
                }
            }

            try {
                window.location.href = "swish://";
            } catch (error) {
                console.log('Could not open Swish app');
                alert('Kunde inte öppna Swish. Kontrollera att Swish-appen är installerad.');
            }
        }

        // Initialize total on page load
        document.addEventListener('DOMContentLoaded', function () {
            updateTotal();
        });
    </script>
</body>

</html>